defmodule Sublist do
  def compare(a, b) do
    cond do
      a == b -> :equal
      sublist?(a, b) -> :sublist
      sublist?(b, a) -> :superlist
      true -> :unequal
    end
  end

  defp sublist?([], _), do: true
  defp sublist?(_, []), do: false

  defp sublist?(small = [h | t], big = [bh | bt]) do
    case match_prefix?(small, big) do
      true -> true
      false -> sublist?(small, bt)
    end
  end

  # Jeśli lista big jest krótsza niż small, false
  defp sublist?(small, big) when length(big) < length(small), do: false

  # Sprawdza, czy small pasuje na początku big
  defp match_prefix?([], _), do: true
  defp match_prefix?(_, []), do: false
  defp match_prefix?([h | t], [h | bt]), do: match_prefix?(t, bt)
  defp match_prefix?([h1 | _], [h2 | _]), do: h1 != h2 && false
end
